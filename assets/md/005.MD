## 第五章 交换机

### 5.1 原理

![](https://github.com/YuxingXie/study-rabbitmq/blob/main/assets/img/002.png)

生产者和队列中间多了交换机、routingKey、绑定这些东西。

多了个broker概念。

有个重要概念：生产者的消息必须通过交换机。


之前我们也使用了交换机，channel.basicPublish(..)第一个参数为字符串型的交换机，我们填的空字符串，
表示默认交换机。另外这个方法的第二个参数就是routingKey，我们之前是用的队列名。如果制定了交换机名称，
routingKey不能再写队列名了。

我们之前的消费者代码中并未出现交换机、routingKey，只出现了channel、队列名。

交换机类型：直接(Direct)、主题(Topic)、扇出(Fanout)、标题(Headers，这个应该废弃了吧)

### 5.2 临时队列

非持久化的队列都称为临时队列。amq重启后临时队列都会消失。在UI界面临时队列不带D标记。

### 5.3 绑定

绑定(binding)就是交换机与队列之间的捆绑关系。通过routingKey绑定。

### 5.3 Fanout

即Publish/Subscribe(发布/订阅模式)，可以有多个消费者。